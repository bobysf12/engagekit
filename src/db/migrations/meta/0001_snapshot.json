{
  "version": "6",
  "dialect": "sqlite",
  "id": "7cafc2ce-2da8-4056-8be3-8694499bf6b8",
  "prevId": "8b871619-4032-4559-957d-88ad42f1c606",
  "tables": {
    "accounts": {
      "name": "accounts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "handle": {
          "name": "handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'needs_initial_auth'"
        },
        "session_state_path": {
          "name": "session_state_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_auth_at": {
          "name": "last_auth_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_auth_check_at": {
          "name": "last_auth_check_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_code": {
          "name": "last_error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_at": {
          "name": "last_error_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_detail": {
          "name": "last_error_detail",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cooldown_seconds": {
          "name": "cooldown_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 30
        },
        "search_queries_json": {
          "name": "search_queries_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "accounts_platform_handle_idx": {
          "name": "accounts_platform_handle_idx",
          "columns": [
            "platform",
            "handle"
          ],
          "isUnique": true
        },
        "accounts_platform_status_idx": {
          "name": "accounts_platform_status_idx",
          "columns": [
            "platform",
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "comments": {
      "name": "comments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform_comment_id": {
          "name": "platform_comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "parent_post_id": {
          "name": "parent_post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_handle": {
          "name": "author_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_display_name": {
          "name": "author_display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "body_text": {
          "name": "body_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_hash_alg": {
          "name": "content_hash_alg",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'sha256:v1'"
        },
        "comment_url": {
          "name": "comment_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "published_at": {
          "name": "published_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source_account_id": {
          "name": "source_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "comments_platform_comment_id_idx": {
          "name": "comments_platform_comment_id_idx",
          "columns": [
            "platform",
            "platform_comment_id"
          ],
          "isUnique": true
        },
        "comments_parent_post_id_idx": {
          "name": "comments_parent_post_id_idx",
          "columns": [
            "parent_post_id"
          ],
          "isUnique": false
        },
        "comments_published_at_idx": {
          "name": "comments_published_at_idx",
          "columns": [
            "platform",
            "published_at DESC"
          ],
          "isUnique": false
        },
        "comments_content_hash_idx": {
          "name": "comments_content_hash_idx",
          "columns": [
            "content_hash"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "comments_parent_post_id_posts_id_fk": {
          "name": "comments_parent_post_id_posts_id_fk",
          "tableFrom": "comments",
          "tableTo": "posts",
          "columnsFrom": [
            "parent_post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "comments_source_account_id_accounts_id_fk": {
          "name": "comments_source_account_id_accounts_id_fk",
          "tableFrom": "comments",
          "tableTo": "accounts",
          "columnsFrom": [
            "source_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "cron_job_runs": {
      "name": "cron_job_runs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "cron_job_id": {
          "name": "cron_job_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scrape_run_id": {
          "name": "scrape_run_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "cron_job_runs_cron_job_idx": {
          "name": "cron_job_runs_cron_job_idx",
          "columns": [
            "cron_job_id",
            "started_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "cron_job_runs_cron_job_id_cron_jobs_id_fk": {
          "name": "cron_job_runs_cron_job_id_cron_jobs_id_fk",
          "tableFrom": "cron_job_runs",
          "tableTo": "cron_jobs",
          "columnsFrom": [
            "cron_job_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "cron_job_runs_scrape_run_id_scrape_runs_id_fk": {
          "name": "cron_job_runs_scrape_run_id_scrape_runs_id_fk",
          "tableFrom": "cron_job_runs",
          "tableTo": "scrape_runs",
          "columnsFrom": [
            "scrape_run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "cron_jobs": {
      "name": "cron_jobs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "account_id": {
          "name": "account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cron_expr": {
          "name": "cron_expr",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'UTC'"
        },
        "enabled": {
          "name": "enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "pipeline_config_json": {
          "name": "pipeline_config_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_run_at": {
          "name": "last_run_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "next_run_at": {
          "name": "next_run_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_status": {
          "name": "last_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "cron_jobs_account_idx": {
          "name": "cron_jobs_account_idx",
          "columns": [
            "account_id"
          ],
          "isUnique": false
        },
        "cron_jobs_enabled_idx": {
          "name": "cron_jobs_enabled_idx",
          "columns": [
            "enabled",
            "next_run_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "cron_jobs_account_id_accounts_id_fk": {
          "name": "cron_jobs_account_id_accounts_id_fk",
          "tableFrom": "cron_jobs",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "deep_scrape_tasks": {
      "name": "deep_scrape_tasks",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "post_id": {
          "name": "post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "attempt_count": {
          "name": "attempt_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "last_error_code": {
          "name": "last_error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_detail": {
          "name": "last_error_detail",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "deep_scrape_tasks_run_account_post_idx": {
          "name": "deep_scrape_tasks_run_account_post_idx",
          "columns": [
            "run_account_id",
            "post_id"
          ],
          "isUnique": true
        },
        "deep_scrape_tasks_status_idx": {
          "name": "deep_scrape_tasks_status_idx",
          "columns": [
            "run_account_id",
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "deep_scrape_tasks_run_account_id_scrape_run_accounts_id_fk": {
          "name": "deep_scrape_tasks_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "deep_scrape_tasks",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "deep_scrape_tasks_post_id_posts_id_fk": {
          "name": "deep_scrape_tasks_post_id_posts_id_fk",
          "tableFrom": "deep_scrape_tasks",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "draft_feedback_signals": {
      "name": "draft_feedback_signals",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "post_id": {
          "name": "post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "selected_draft_id": {
          "name": "selected_draft_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "rejected_draft_ids_json": {
          "name": "rejected_draft_ids_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "draft_feedback_signals_run_account_idx": {
          "name": "draft_feedback_signals_run_account_idx",
          "columns": [
            "run_account_id",
            "created_at DESC"
          ],
          "isUnique": false
        },
        "draft_feedback_signals_post_idx": {
          "name": "draft_feedback_signals_post_idx",
          "columns": [
            "post_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "draft_feedback_signals_run_account_id_scrape_run_accounts_id_fk": {
          "name": "draft_feedback_signals_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "draft_feedback_signals",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "draft_feedback_signals_post_id_posts_id_fk": {
          "name": "draft_feedback_signals_post_id_posts_id_fk",
          "tableFrom": "draft_feedback_signals",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "draft_feedback_signals_selected_draft_id_llm_drafts_id_fk": {
          "name": "draft_feedback_signals_selected_draft_id_llm_drafts_id_fk",
          "tableFrom": "draft_feedback_signals",
          "tableTo": "llm_drafts",
          "columnsFrom": [
            "selected_draft_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "engagement_policies": {
      "name": "engagement_policies",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "account_id": {
          "name": "account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "topics_json": {
          "name": "topics_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "goals_json": {
          "name": "goals_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "avoid_list_json": {
          "name": "avoid_list_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tone_identity": {
          "name": "tone_identity",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "preferred_languages_json": {
          "name": "preferred_languages_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "engagement_policies_account_idx": {
          "name": "engagement_policies_account_idx",
          "columns": [
            "account_id"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "engagement_policies_account_id_accounts_id_fk": {
          "name": "engagement_policies_account_id_accounts_id_fk",
          "tableFrom": "engagement_policies",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "engagement_policy_snapshots": {
      "name": "engagement_policy_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "policy_id": {
          "name": "policy_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "policy_snapshot_json": {
          "name": "policy_snapshot_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "engagement_policy_snapshots_run_account_idx": {
          "name": "engagement_policy_snapshots_run_account_idx",
          "columns": [
            "run_account_id"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "engagement_policy_snapshots_run_account_id_scrape_run_accounts_id_fk": {
          "name": "engagement_policy_snapshots_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "engagement_policy_snapshots",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "engagement_policy_snapshots_policy_id_engagement_policies_id_fk": {
          "name": "engagement_policy_snapshots_policy_id_engagement_policies_id_fk",
          "tableFrom": "engagement_policy_snapshots",
          "tableTo": "engagement_policies",
          "columnsFrom": [
            "policy_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "engagement_queue": {
      "name": "engagement_queue",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "engagement_queue_status_priority_idx": {
          "name": "engagement_queue_status_priority_idx",
          "columns": [
            "status",
            "priority DESC",
            "created_at"
          ],
          "isUnique": false
        },
        "engagement_queue_entity_idx": {
          "name": "engagement_queue_entity_idx",
          "columns": [
            "entity_type",
            "entity_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "llm_drafts": {
      "name": "llm_drafts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "queue_id": {
          "name": "queue_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "draft_text": {
          "name": "draft_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'generated'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "post_id": {
          "name": "post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "option_index": {
          "name": "option_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "input_context_json": {
          "name": "input_context_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "selected_at": {
          "name": "selected_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "selected_by": {
          "name": "selected_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "llm_drafts_queue_created_idx": {
          "name": "llm_drafts_queue_created_idx",
          "columns": [
            "queue_id",
            "created_at DESC"
          ],
          "isUnique": false
        },
        "llm_drafts_run_account_post_idx": {
          "name": "llm_drafts_run_account_post_idx",
          "columns": [
            "run_account_id",
            "post_id",
            "created_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "llm_drafts_queue_id_engagement_queue_id_fk": {
          "name": "llm_drafts_queue_id_engagement_queue_id_fk",
          "tableFrom": "llm_drafts",
          "tableTo": "engagement_queue",
          "columnsFrom": [
            "queue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "llm_drafts_run_account_id_scrape_run_accounts_id_fk": {
          "name": "llm_drafts_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "llm_drafts",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "llm_drafts_post_id_posts_id_fk": {
          "name": "llm_drafts_post_id_posts_id_fk",
          "tableFrom": "llm_drafts",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "metric_snapshots": {
      "name": "metric_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "likes_count": {
          "name": "likes_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "replies_count": {
          "name": "replies_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reposts_count": {
          "name": "reposts_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "views_count": {
          "name": "views_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "metric_snapshots_entity_captured_run_idx": {
          "name": "metric_snapshots_entity_captured_run_idx",
          "columns": [
            "entity_type",
            "entity_id",
            "captured_at",
            "run_account_id"
          ],
          "isUnique": true
        },
        "metric_snapshots_entity_captured_idx": {
          "name": "metric_snapshots_entity_captured_idx",
          "columns": [
            "entity_type",
            "entity_id",
            "captured_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "metric_snapshots_run_account_id_scrape_run_accounts_id_fk": {
          "name": "metric_snapshots_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "metric_snapshots",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "post_triage": {
      "name": "post_triage",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "post_id": {
          "name": "post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "relevance_score": {
          "name": "relevance_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "relevance_label": {
          "name": "relevance_label",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reasons_json": {
          "name": "reasons_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "confidence": {
          "name": "confidence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "rank": {
          "name": "rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_top_20": {
          "name": "is_top_20",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "selected_for_deep_scrape": {
          "name": "selected_for_deep_scrape",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "post_triage_run_account_post_idx": {
          "name": "post_triage_run_account_post_idx",
          "columns": [
            "run_account_id",
            "post_id"
          ],
          "isUnique": true
        },
        "post_triage_selection_idx": {
          "name": "post_triage_selection_idx",
          "columns": [
            "run_account_id",
            "selected_for_deep_scrape",
            "relevance_score DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "post_triage_run_account_id_scrape_run_accounts_id_fk": {
          "name": "post_triage_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "post_triage",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "post_triage_post_id_posts_id_fk": {
          "name": "post_triage_post_id_posts_id_fk",
          "tableFrom": "post_triage",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "posts": {
      "name": "posts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform_post_id": {
          "name": "platform_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "author_handle": {
          "name": "author_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_display_name": {
          "name": "author_display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "body_text": {
          "name": "body_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_hash_alg": {
          "name": "content_hash_alg",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'sha256:v1'"
        },
        "post_url": {
          "name": "post_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "thread_root_platform_post_id": {
          "name": "thread_root_platform_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "published_at": {
          "name": "published_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source_account_id": {
          "name": "source_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "posts_platform_post_id_idx": {
          "name": "posts_platform_post_id_idx",
          "columns": [
            "platform",
            "platform_post_id"
          ],
          "isUnique": true
        },
        "posts_published_at_idx": {
          "name": "posts_published_at_idx",
          "columns": [
            "platform",
            "published_at DESC"
          ],
          "isUnique": false
        },
        "posts_content_hash_idx": {
          "name": "posts_content_hash_idx",
          "columns": [
            "content_hash"
          ],
          "isUnique": false
        },
        "posts_source_idx": {
          "name": "posts_source_idx",
          "columns": [
            "source_account_id",
            "last_seen_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "posts_source_account_id_accounts_id_fk": {
          "name": "posts_source_account_id_accounts_id_fk",
          "tableFrom": "posts",
          "tableTo": "accounts",
          "columnsFrom": [
            "source_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "raw_snapshots": {
      "name": "raw_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_ref": {
          "name": "entity_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_json": {
          "name": "snapshot_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_hash": {
          "name": "snapshot_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "raw_snapshots_platform_entity_snapshot_hash_idx": {
          "name": "raw_snapshots_platform_entity_snapshot_hash_idx",
          "columns": [
            "platform",
            "entity_type",
            "entity_ref",
            "snapshot_hash"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "raw_snapshots_run_account_id_scrape_run_accounts_id_fk": {
          "name": "raw_snapshots_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "raw_snapshots",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scrape_run_accounts": {
      "name": "scrape_run_accounts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_id": {
          "name": "run_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "account_id": {
          "name": "account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "posts_found": {
          "name": "posts_found",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "comments_found": {
          "name": "comments_found",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "snapshots_written": {
          "name": "snapshots_written",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "error_code": {
          "name": "error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_detail": {
          "name": "error_detail",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "scrape_run_accounts_run_account_idx": {
          "name": "scrape_run_accounts_run_account_idx",
          "columns": [
            "run_id",
            "account_id"
          ],
          "isUnique": true
        },
        "scrape_run_accounts_account_started_idx": {
          "name": "scrape_run_accounts_account_started_idx",
          "columns": [
            "account_id",
            "started_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "scrape_run_accounts_run_id_scrape_runs_id_fk": {
          "name": "scrape_run_accounts_run_id_scrape_runs_id_fk",
          "tableFrom": "scrape_run_accounts",
          "tableTo": "scrape_runs",
          "columnsFrom": [
            "run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "scrape_run_accounts_account_id_accounts_id_fk": {
          "name": "scrape_run_accounts_account_id_accounts_id_fk",
          "tableFrom": "scrape_run_accounts",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scrape_runs": {
      "name": "scrape_runs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "trigger": {
          "name": "trigger",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {
      "comments_published_at_idx": {
        "columns": {
          "published_at DESC": {
            "isExpression": true
          }
        }
      },
      "cron_job_runs_cron_job_idx": {
        "columns": {
          "started_at DESC": {
            "isExpression": true
          }
        }
      },
      "draft_feedback_signals_run_account_idx": {
        "columns": {
          "created_at DESC": {
            "isExpression": true
          }
        }
      },
      "engagement_queue_status_priority_idx": {
        "columns": {
          "priority DESC": {
            "isExpression": true
          }
        }
      },
      "llm_drafts_queue_created_idx": {
        "columns": {
          "created_at DESC": {
            "isExpression": true
          }
        }
      },
      "llm_drafts_run_account_post_idx": {
        "columns": {
          "created_at DESC": {
            "isExpression": true
          }
        }
      },
      "metric_snapshots_entity_captured_idx": {
        "columns": {
          "captured_at DESC": {
            "isExpression": true
          }
        }
      },
      "post_triage_selection_idx": {
        "columns": {
          "relevance_score DESC": {
            "isExpression": true
          }
        }
      },
      "posts_published_at_idx": {
        "columns": {
          "published_at DESC": {
            "isExpression": true
          }
        }
      },
      "posts_source_idx": {
        "columns": {
          "last_seen_at DESC": {
            "isExpression": true
          }
        }
      },
      "scrape_run_accounts_account_started_idx": {
        "columns": {
          "started_at DESC": {
            "isExpression": true
          }
        }
      }
    }
  }
}