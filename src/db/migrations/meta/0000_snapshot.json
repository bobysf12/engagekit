{
  "version": "6",
  "dialect": "sqlite",
  "id": "8b871619-4032-4559-957d-88ad42f1c606",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "accounts": {
      "name": "accounts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "handle": {
          "name": "handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'needs_initial_auth'"
        },
        "session_state_path": {
          "name": "session_state_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_auth_at": {
          "name": "last_auth_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_auth_check_at": {
          "name": "last_auth_check_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_code": {
          "name": "last_error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_at": {
          "name": "last_error_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error_detail": {
          "name": "last_error_detail",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cooldown_seconds": {
          "name": "cooldown_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 30
        },
        "search_queries_json": {
          "name": "search_queries_json",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "accounts_platform_handle_idx": {
          "name": "accounts_platform_handle_idx",
          "columns": [
            "platform",
            "handle"
          ],
          "isUnique": true
        },
        "accounts_platform_status_idx": {
          "name": "accounts_platform_status_idx",
          "columns": [
            "platform",
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "comments": {
      "name": "comments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform_comment_id": {
          "name": "platform_comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "parent_post_id": {
          "name": "parent_post_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_handle": {
          "name": "author_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_display_name": {
          "name": "author_display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "body_text": {
          "name": "body_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_hash_alg": {
          "name": "content_hash_alg",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'sha256:v1'"
        },
        "comment_url": {
          "name": "comment_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "published_at": {
          "name": "published_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source_account_id": {
          "name": "source_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "comments_platform_comment_id_idx": {
          "name": "comments_platform_comment_id_idx",
          "columns": [
            "platform",
            "platform_comment_id"
          ],
          "isUnique": true
        },
        "comments_parent_post_id_idx": {
          "name": "comments_parent_post_id_idx",
          "columns": [
            "parent_post_id"
          ],
          "isUnique": false
        },
        "comments_published_at_idx": {
          "name": "comments_published_at_idx",
          "columns": [
            "platform",
            "published_at DESC"
          ],
          "isUnique": false
        },
        "comments_content_hash_idx": {
          "name": "comments_content_hash_idx",
          "columns": [
            "content_hash"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "comments_parent_post_id_posts_id_fk": {
          "name": "comments_parent_post_id_posts_id_fk",
          "tableFrom": "comments",
          "tableTo": "posts",
          "columnsFrom": [
            "parent_post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "comments_source_account_id_accounts_id_fk": {
          "name": "comments_source_account_id_accounts_id_fk",
          "tableFrom": "comments",
          "tableTo": "accounts",
          "columnsFrom": [
            "source_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "engagement_queue": {
      "name": "engagement_queue",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "engagement_queue_status_priority_idx": {
          "name": "engagement_queue_status_priority_idx",
          "columns": [
            "status",
            "priority DESC",
            "created_at"
          ],
          "isUnique": false
        },
        "engagement_queue_entity_idx": {
          "name": "engagement_queue_entity_idx",
          "columns": [
            "entity_type",
            "entity_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "llm_drafts": {
      "name": "llm_drafts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "queue_id": {
          "name": "queue_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "draft_text": {
          "name": "draft_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'generated'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "llm_drafts_queue_created_idx": {
          "name": "llm_drafts_queue_created_idx",
          "columns": [
            "queue_id",
            "created_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "llm_drafts_queue_id_engagement_queue_id_fk": {
          "name": "llm_drafts_queue_id_engagement_queue_id_fk",
          "tableFrom": "llm_drafts",
          "tableTo": "engagement_queue",
          "columnsFrom": [
            "queue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "metric_snapshots": {
      "name": "metric_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "likes_count": {
          "name": "likes_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "replies_count": {
          "name": "replies_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reposts_count": {
          "name": "reposts_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "views_count": {
          "name": "views_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "metric_snapshots_entity_captured_run_idx": {
          "name": "metric_snapshots_entity_captured_run_idx",
          "columns": [
            "entity_type",
            "entity_id",
            "captured_at",
            "run_account_id"
          ],
          "isUnique": true
        },
        "metric_snapshots_entity_captured_idx": {
          "name": "metric_snapshots_entity_captured_idx",
          "columns": [
            "entity_type",
            "entity_id",
            "captured_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "metric_snapshots_run_account_id_scrape_run_accounts_id_fk": {
          "name": "metric_snapshots_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "metric_snapshots",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "posts": {
      "name": "posts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform_post_id": {
          "name": "platform_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "author_handle": {
          "name": "author_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "author_display_name": {
          "name": "author_display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "body_text": {
          "name": "body_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_hash_alg": {
          "name": "content_hash_alg",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'sha256:v1'"
        },
        "post_url": {
          "name": "post_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "thread_root_platform_post_id": {
          "name": "thread_root_platform_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "published_at": {
          "name": "published_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source_account_id": {
          "name": "source_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "posts_platform_post_id_idx": {
          "name": "posts_platform_post_id_idx",
          "columns": [
            "platform",
            "platform_post_id"
          ],
          "isUnique": true
        },
        "posts_published_at_idx": {
          "name": "posts_published_at_idx",
          "columns": [
            "platform",
            "published_at DESC"
          ],
          "isUnique": false
        },
        "posts_content_hash_idx": {
          "name": "posts_content_hash_idx",
          "columns": [
            "content_hash"
          ],
          "isUnique": false
        },
        "posts_source_idx": {
          "name": "posts_source_idx",
          "columns": [
            "source_account_id",
            "last_seen_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "posts_source_account_id_accounts_id_fk": {
          "name": "posts_source_account_id_accounts_id_fk",
          "tableFrom": "posts",
          "tableTo": "accounts",
          "columnsFrom": [
            "source_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "raw_snapshots": {
      "name": "raw_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_ref": {
          "name": "entity_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_json": {
          "name": "snapshot_json",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_hash": {
          "name": "snapshot_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "run_account_id": {
          "name": "run_account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "raw_snapshots_platform_entity_snapshot_hash_idx": {
          "name": "raw_snapshots_platform_entity_snapshot_hash_idx",
          "columns": [
            "platform",
            "entity_type",
            "entity_ref",
            "snapshot_hash"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "raw_snapshots_run_account_id_scrape_run_accounts_id_fk": {
          "name": "raw_snapshots_run_account_id_scrape_run_accounts_id_fk",
          "tableFrom": "raw_snapshots",
          "tableTo": "scrape_run_accounts",
          "columnsFrom": [
            "run_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scrape_run_accounts": {
      "name": "scrape_run_accounts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "run_id": {
          "name": "run_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "account_id": {
          "name": "account_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "posts_found": {
          "name": "posts_found",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "comments_found": {
          "name": "comments_found",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "snapshots_written": {
          "name": "snapshots_written",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "error_code": {
          "name": "error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_detail": {
          "name": "error_detail",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "scrape_run_accounts_run_account_idx": {
          "name": "scrape_run_accounts_run_account_idx",
          "columns": [
            "run_id",
            "account_id"
          ],
          "isUnique": true
        },
        "scrape_run_accounts_account_started_idx": {
          "name": "scrape_run_accounts_account_started_idx",
          "columns": [
            "account_id",
            "started_at DESC"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "scrape_run_accounts_run_id_scrape_runs_id_fk": {
          "name": "scrape_run_accounts_run_id_scrape_runs_id_fk",
          "tableFrom": "scrape_run_accounts",
          "tableTo": "scrape_runs",
          "columnsFrom": [
            "run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "scrape_run_accounts_account_id_accounts_id_fk": {
          "name": "scrape_run_accounts_account_id_accounts_id_fk",
          "tableFrom": "scrape_run_accounts",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scrape_runs": {
      "name": "scrape_runs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "trigger": {
          "name": "trigger",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {
      "comments_published_at_idx": {
        "columns": {
          "published_at DESC": {
            "isExpression": true
          }
        }
      },
      "engagement_queue_status_priority_idx": {
        "columns": {
          "priority DESC": {
            "isExpression": true
          }
        }
      },
      "llm_drafts_queue_created_idx": {
        "columns": {
          "created_at DESC": {
            "isExpression": true
          }
        }
      },
      "metric_snapshots_entity_captured_idx": {
        "columns": {
          "captured_at DESC": {
            "isExpression": true
          }
        }
      },
      "posts_published_at_idx": {
        "columns": {
          "published_at DESC": {
            "isExpression": true
          }
        }
      },
      "posts_source_idx": {
        "columns": {
          "last_seen_at DESC": {
            "isExpression": true
          }
        }
      },
      "scrape_run_accounts_account_started_idx": {
        "columns": {
          "started_at DESC": {
            "isExpression": true
          }
        }
      }
    }
  }
}